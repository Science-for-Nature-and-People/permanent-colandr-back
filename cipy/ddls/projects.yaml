---
schema:
    table_name: "projects"
    columns:
        -
            column_name: "project_id"
            data_type: "SERIAL"
            column_constraints: "PRIMARY KEY"
        -
            column_name: "created_ts"
            data_type: "TIMESTAMP(0) WITHOUT TIME ZONE"
            column_constraints: "NOT NULL"
        -
            column_name: "owner_user_id"
            data_type: "INTEGER"
            column_constraints: "NOT NULL"
        -
            column_name: "user_ids"
            data_type: "INTEGER ARRAY"
            column_constraints: "NOT NULL"
        -
            column_name: "name"
            data_type: "VARCHAR(500)"
            column_constraints: "NOT NULL"
        -
            column_name: "description"
            data_type: "TEXT"
templates:
    create_project: >
        INSERT INTO projects (created_ts, owner_user_id, user_ids, name, description)
        VALUES (%(created_ts)s, %(owner_user_id)s, %(user_ids)s, %(name)s, %(description)s)
        RETURNING project_id
    delete_project: >
        DELETE from projects
        WHERE
            project_id = %(project_id)s
            AND owner_user_id = %(user_id)s
        RETURNING project_id
    get_owner_user_id: >
        SELECT owner_user_id FROM projects
        WHERE project_id = %(project_id)s
...
